import tkinter as tk
from tkinter import messagebox


class Chessboard:
    def __init__(self, master):
        self.master = master
        self.master.title("8 Ферзей")
        self.board_size = 8
        self.cell_size = 60
        self.queens = 0
        self.board = [[0 for _ in range(self.board_size)] for _ in range(self.board_size)]

        self.canvas = tk.Canvas(master, width=self.cell_size * self.board_size, height=self.cell_size * self.board_size)
        self.canvas.pack()
        self.draw_board()

        self.canvas.bind("<Button-1>", self.place_queen)

    def draw_board(self):
        self.canvas.delete("all")
        for row in range(self.board_size):
            for col in range(self.board_size):
                color = "white" if (row + col) % 2 == 0 else "lightgray"
                self.canvas.create_rectangle(col * self.cell_size, row * self.cell_size,
                                             (col + 1) * self.cell_size, (row + 1) * self.cell_size,
                                             fill=color)

                if self.board[row][col] == 1:
                    self.canvas.create_oval(col * self.cell_size + 10, row * self.cell_size + 10,
                                            (col + 1) * self.cell_size - 10, (row + 1) * self.cell_size - 10,
                                            fill="red")

    def place_queen(self, event):
        col = event.x // self.cell_size
        row = event.y // self.cell_size

        if self.is_safe(row, col):
            self.board[row][col] = 1
            self.queens += 1
            self.draw_board()

            if self.queens == 8:
                messagebox.showinfo("Поздравляем!", "Вы расставили всех 8 ферзей!")
        else:
            messagebox.showwarning("Неправильный ход", "Ферзь не может быть размещен в этой клетке.")

    def is_safe(self, row, col):

        if 1 in self.board[row]:
            return False


        for r in range(self.board_size):
            if self.board[r][col] == 1:
                return False


        for d in range(-self.board_size, self.board_size):

            if 0 <= row + d < self.board_size and 0 <= col + d < self.board_size:
                if self.board[row + d][col + d] == 1:
                    return False


        for d in range(-self.board_size, self.board_size):

            if 0 <= row + d < self.board_size and 0 <= col - d < self.board_size:
                if self.board[row + d][col - d] == 1:
                    return False

        return True


if __name__ == "__main__":
    root = tk.Tk()
    chessboard = Chessboard(root)
    root.mainloop()
